from tests.fixtures.common_fixtures import COMMON_FIXTURES
from tests.fixtures.gas_fee_fixtures import GAS_FEE_FIXTURES

# 0x52349b17 --> totalBuffered
# 0x509c5df6 --> reservedFunds
# 0x0d7abc33 --> delegationLowerBound
# 0x7e978af8 --> getTotalStakeAcrossAllValidators

# totalBuffered > 3 % of total delegated
DELEGATE_BASE_FIXTURES = {
    'eth_call':(
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x52349b17'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000010000'}),
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x509c5df6'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x0d7abc33'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x7e978af8'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000100000'})
    ),
    'eth_getBalance': (
        (['0x3f17f1962B36e491b30A40b2405849e597Ba5FB5', 'latest'], {'jsonrpc': '2.0', 'id': 0, 'result': '0xffffffffffffffff'}),
    ),
    **GAS_FEE_FIXTURES,
    **COMMON_FIXTURES,
}

#  1 % < totalBuffered < 3% of total delegated
DELEGATE_FIXTURES_IN_RANGE = {
    'eth_call':(
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x52349b17'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000002'}),
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x509c5df6'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x0d7abc33'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x7e978af8'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000064'})
    ),
    'eth_getBalance': (
        (['0x3f17f1962B36e491b30A40b2405849e597Ba5FB5', 'latest'], {'jsonrpc': '2.0', 'id': 0, 'result': '0xffffffffffffffff'}),
    ),
    **GAS_FEE_FIXTURES,
    **COMMON_FIXTURES,
}

#  1 % > totalBuffered of total delegated
DELEGATE_FIXTURES_OUT_RANGE = {
    'eth_call':(
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x52349b17'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000001'}),
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x509c5df6'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x0d7abc33'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x7e978af8'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000064'})
    ),
    'eth_getBalance': (
        (['0x3f17f1962B36e491b30A40b2405849e597Ba5FB5', 'latest'], {'jsonrpc': '2.0', 'id': 0, 'result': '0xffffffffffffffff'}),
    ),
    **GAS_FEE_FIXTURES,
    **COMMON_FIXTURES,
}

DISTRIBUTE_BASE_REWARDS_FIXTURES = {
    'eth_call':(
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x52349b17'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'to': '0x9A7c69A167160C507602ecB3Df4911e8E98e1279', 'data': '0xa2452947'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000010'}),
        (({'to': '0x797C1369e578172112526dfcD0D5f9182067c928', 'data': '0x4a84dabb00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000001000000000000000000000000c8a5df49ef9d12b41ecd9da0da864e87fd1e125700000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000005a1b57f87b59e093d332c945c66b602843099f9700000000000000000000000000000000000000000000000000000000000000020000000000000000000000001b09895c2ad5a0c6be4053e5627c3575757c670500000000000000000000000000000000000000000000003635c9adc5dea00000000000000000000000000000e77a6319fdc1456e5def674fbc7d77e72b9efcc900000000000000000000000000000000000000000000000000000000000000030000000000000000000000000b764b080a67f9019677ae2c9279f52485fd452500000000000000000000000000000000000000000000003635c9adc5dea0000000000000000000000000000020b30f9fb122a609e9b5ec4eb32e20228165a2440000000000000000000000000000000000000000000000000000000000000004000000000000000000000000144070a59fe5e7ebe963ca59b500e60485c235b900000000000000000000000000000000000000000000003635c9adc5dea00000000000000000000000000000f8e46740d3f85fda9c1be5e680356241d42b879b'}),
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0xa2452947'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000010'}),
        (({'to': '0x7D1AfA7B718fb893dB30A3aBc0Cfc608AaCfeBB0', 'data': '0x70a082310000000000000000000000009ee91f9f426fa633d227f7a9b000e28b9dfd8599'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000001000'}),
        (['0xc8A5dF49EF9D12B41Ecd9DA0DA864e87FD1e1257', 'latest'], {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000001000'}),
        (({'to': '0xc8A5dF49EF9D12B41Ecd9DA0DA864e87FD1e1257', 'data': '0x676e55500000000000000000000000009ee91f9f426fa633d227f7a9b000e28b9dfd8599'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000001010'}),
        (({'to': '0xc8A5dF49EF9D12B41Ecd9DA0DA864e87FD1e1257', 'data': '0x9b2cb5d8'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'to': '0x1B09895C2AD5a0C6Be4053E5627C3575757C6705', 'data': '0x676e55500000000000000000000000009ee91f9f426fa633d227f7a9b000e28b9dfd8599'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000001010'}),
        (({'to': '0x1B09895C2AD5a0C6Be4053E5627C3575757C6705', 'data': '0x9b2cb5d8'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'to': '0x0b764b080a67f9019677Ae2c9279F52485Fd4525', 'data': '0x676e55500000000000000000000000009ee91f9f426fa633d227f7a9b000e28b9dfd8599'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000001010'}),
        (({'to': '0x0b764b080a67f9019677Ae2c9279F52485Fd4525', 'data': '0x9b2cb5d8'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'to': '0x144070a59Fe5e7EBE963Ca59b500E60485c235B9', 'data': '0x676e55500000000000000000000000009ee91f9f426fa633d227f7a9b000e28b9dfd8599'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000001010'}),
        (({'to': '0x144070a59Fe5e7EBE963Ca59b500E60485c235B9', 'data': '0x9b2cb5d8'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'from': '0x3E46BEFDA7112d8954b923ea6bd9f07c2e615e10', 'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x9b2cb5d8'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': ''})
    ),
    'eth_getBalance': (
        (['0x3f17f1962B36e491b30A40b2405849e597Ba5FB5', 'latest'], {'jsonrpc': '2.0', 'id': 0, 'result': '0xffffffffffffffff'}),
    ),
    **GAS_FEE_FIXTURES,
    **COMMON_FIXTURES
}

DEPOSITOR_BASE_FIXTURES = {
    'eth_accounts': (
        ((), {'jsonrpc': '2.0', 'id': 0, 'result': []}),
    ),
    'eth_getBalance': (
        (['0x3f17f1962B36e491b30A40b2405849e597Ba5FB5', 'latest'], {'jsonrpc': '2.0', 'id': 0, 'result': '0xffffffffffffffff'}),
    ),
    **GAS_FEE_FIXTURES,
    **COMMON_FIXTURES,
}

DEPOSITOR_BASE_FIXTURES_SMALL_BALANCE = {
    **DELEGATE_BASE_FIXTURES,
    'eth_getBalance': (
        (['0x3f17f1962B36e491b30A40b2405849e597Ba5FB5', 'latest'], {'jsonrpc': '2.0', 'id': 0, 'result': '0xfff'}),
    ),
}

DEPOSITOR_FIXTURES_WITH_HIGH_GAS = {
    **DELEGATE_BASE_FIXTURES,
    'eth_getBalance': (
        (['0x3E46BEFDA7112d8954b923ea6bd9f07c2e615e10', 'latest'], {'jsonrpc': '2.0', 'id': 0, 'result': '0xffffffffffffffff'}),
    ),
    'eth_getBlockByNumber': (
        (('latest', False), {'jsonrpc': '2.0', 'id': 15,
                             'result': {'baseFeePerGas': '0xffbf193d7', 'difficulty': '0x29aa4945316813',
                                        'extraData': '0x486976656f6e2065752d6865617679', 'gasLimit': '0x1c9c380',
                                        'gasUsed': '0x65fe32',
                                        'hash': '0xf7b1887b32ad3b9346f907947e2dffb5012de2b7cb7b6b84b950356237944d0c',
                                        'logsBloom': '0x092000900100008810000000805c080000000000000008000001606044086000080101400080020080005883004901909220824588002c900088840040212040880004004021410a8822000810002020800100088240050104000c03802844101a00002012004482014408221000189000008840081064082000003404288c0800820120104030000044008a0821000241000401910080180021084201100401071880289001a00202000080080810401000001021802010183c1000100c2000210003032200081028010d20005600400000024203991230848a000201026008a131202a0400090000419000010008a00000a880305102502000090000001220',
                                        'miner': '0x1ad91ee08f21be3de0ba2ba6918e714da6b45836',
                                        'mixHash': '0x98630b099b638f63942ba8ff6b65b8a7b26dd38c6e125528104aeff50c01d02a',
                                        'nonce': '0x0000030ab4a3b4d8', 'number': '0xd17320',
                                        'parentHash': '0xc2ea9185d4821a13da4a2975c85673eff34944e92c0b5d3516a3b4482ac2ab58',
                                        'receiptsRoot': '0x3f30031d0a235a05e183de7416a42a2bdef7cbcbabd581282cfc8b2e239b9abe',
                                        'sha3Uncles': '0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347',
                                        'size': '0x63ff',
                                        'stateRoot': '0x22b47b4d4370336d5a0ffb7423b1a40257b23fdcfe28a3ec45a21e60590e1dd8',
                                        'timestamp': '0x61a88d67', 'totalDifficulty': '0x78d36e1e439ded9742d',
                                        'transactions': [],
                                        'transactionsRoot': '0xfa0b8a5325ea94fd117575c1aedf498ccaccdca636334f938b3b3184426f749c',
                                        'uncles': []}}),
        (('pending', False), {'jsonrpc': '2.0', 'id': 0,
                              'result': {'baseFeePerGas': '0x994a1533d7f', 'difficulty': '0x29be4af025287c',
                                         'extraData': '0xd883010a0c846765746888676f312e31372e33856c696e7578',
                                         'gasLimit': '0x1c95111', 'gasUsed': '0x1b68674', 'hash': None,
                                         'logsBloom': '0x57aa6b0f5ba66e9fbecbbec7849fcff758cddfdfbeb53b3ee5e9bb7d7f7bdfcf79fe7df2bdccb9b3d3e9dff8fcffd7d5ba2bf9139feffdb5f73ffe3bb23ef82d26fa5fa7af73bf2ce9afb63efaff5f7f6ef6387464cfb554b5f7b7ff96e35f753a41fbbf7fb5de9abf76d7d87dbefff6fffaf271ffbf37cf769f5d37b4affeed7f12b75b57fef817f3d72fbd0ff366cc5575ad3ddf361f2dcbae546fe9bfedd6bb5babcb6eee27f9eefd4fd3fdb94f29fb7eca707fffa7f355f3973e1efdbe93efebfbf7cda9997baf3bd9af57fbfd55ffeeff585f0efd7f779fbfab78de60fd8cfe3debfef5c3bdf9d53f9f97adff87c3e3cdc9f1f6f3f9255ffa56e8db7bef',
                                         'miner': None,
                                         'mixHash': '0x0000000000000000000000000000000000000000000000000000000000000000',
                                         'nonce': None, 'number': '0xd18e3e',
                                         'parentHash': '0x01802ffbfec338704593f416bb06005afb88c2a343d5a405d6d3f5359422a41c',
                                         'receiptsRoot': '0xa67cb02111fe0430601215c03aa86a2a95a032487c1644f7561e7d7ef58a4677',
                                         'sha3Uncles': '0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347',
                                         'size': '0x19b97',
                                         'stateRoot': '0xdbffeb5d663c710239c0b8bf57b562848e8bd6d55117ad29cbb9fe930ac0e11a',
                                         'timestamp': '0x61aa03ce', 'totalDifficulty': None, 'transactions': [],
                                         'transactionsRoot': '0xaeade20445251ded37c5efce433e9a526683d340da591774ac14acb4ca7a11d3',
                                         'uncles': []}}),
    ),
}

DELEGATOR_FIXTURES_NOT_ENOUGH_BUFFERED_MATIC = {
    **DELEGATE_BASE_FIXTURES,
    'eth_call':(
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x0d7abc33'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000010000'}),
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x52349b17'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000010000'}),
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x509c5df6'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000010000'}),
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x7e978af8'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000010000'})
    ),
    'eth_getBalance': (
        (['0x3f17f1962B36e491b30A40b2405849e597Ba5FB5', 'latest'], {'jsonrpc': '2.0', 'id': 0, 'result': '0xffffffffffffffff'}),
    )
}

DELEGATOR_FIXTURES_NOT_ENOUGH_REWARDS = {
    **DISTRIBUTE_BASE_REWARDS_FIXTURES,
    'eth_call':(
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x52349b17'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'to': '0x9A7c69A167160C507602ecB3Df4911e8E98e1279', 'data': '0xa2452947'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000010'}),
        (({'to': '0x797C1369e578172112526dfcD0D5f9182067c928', 'data': '0x4a84dabb00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000001000000000000000000000000c8a5df49ef9d12b41ecd9da0da864e87fd1e125700000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000005a1b57f87b59e093d332c945c66b602843099f9700000000000000000000000000000000000000000000000000000000000000020000000000000000000000001b09895c2ad5a0c6be4053e5627c3575757c670500000000000000000000000000000000000000000000003635c9adc5dea00000000000000000000000000000e77a6319fdc1456e5def674fbc7d77e72b9efcc900000000000000000000000000000000000000000000000000000000000000030000000000000000000000000b764b080a67f9019677ae2c9279f52485fd452500000000000000000000000000000000000000000000003635c9adc5dea0000000000000000000000000000020b30f9fb122a609e9b5ec4eb32e20228165a2440000000000000000000000000000000000000000000000000000000000000004000000000000000000000000144070a59fe5e7ebe963ca59b500e60485c235b900000000000000000000000000000000000000000000003635c9adc5dea00000000000000000000000000000f8e46740d3f85fda9c1be5e680356241d42b879b'}),
        (({'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0xa2452947'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000010'}),
        (({'to': '0x7D1AfA7B718fb893dB30A3aBc0Cfc608AaCfeBB0', 'data': '0x70a082310000000000000000000000009ee91f9f426fa633d227f7a9b000e28b9dfd8599'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (['0xc8A5dF49EF9D12B41Ecd9DA0DA864e87FD1e1257', 'latest'], {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000001000'}),
        (({'to': '0xc8A5dF49EF9D12B41Ecd9DA0DA864e87FD1e1257', 'data': '0x676e55500000000000000000000000009ee91f9f426fa633d227f7a9b000e28b9dfd8599'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'to': '0xc8A5dF49EF9D12B41Ecd9DA0DA864e87FD1e1257', 'data': '0x9b2cb5d8'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'to': '0x1B09895C2AD5a0C6Be4053E5627C3575757C6705', 'data': '0x676e55500000000000000000000000009ee91f9f426fa633d227f7a9b000e28b9dfd8599'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'to': '0x1B09895C2AD5a0C6Be4053E5627C3575757C6705', 'data': '0x9b2cb5d8'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'to': '0x0b764b080a67f9019677Ae2c9279F52485Fd4525', 'data': '0x676e55500000000000000000000000009ee91f9f426fa633d227f7a9b000e28b9dfd8599'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'to': '0x0b764b080a67f9019677Ae2c9279F52485Fd4525', 'data': '0x9b2cb5d8'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'to': '0x144070a59Fe5e7EBE963Ca59b500E60485c235B9', 'data': '0x676e55500000000000000000000000009ee91f9f426fa633d227f7a9b000e28b9dfd8599'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'to': '0x144070a59Fe5e7EBE963Ca59b500E60485c235B9', 'data': '0x9b2cb5d8'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': '0x0000000000000000000000000000000000000000000000000000000000000000'}),
        (({'from': '0x3E46BEFDA7112d8954b923ea6bd9f07c2e615e10', 'to': '0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599', 'data': '0x9b2cb5d8'}, 'latest'), {'jsonrpc': '2.0', 'id': 12, 'result': ''})
    ),
    'eth_getBalance': (
        (['0x3f17f1962B36e491b30A40b2405849e597Ba5FB5', 'latest'], {'jsonrpc': '2.0', 'id': 0, 'result': '0xffffffffffffffff'}),
    )
}
